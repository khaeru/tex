\documentclass{article}
% translate with >> pdflatex -shell-escape <file>

% This file is used as unit test for pgfplots, copyright by Christian Feuersaenger.
% 
% See
%   http://pgfplots.sourceforge.net/pgfplots.pdf
% for pgfplots.
%
% Any required input files (for <plot table> or <plot file> or the table package) can be downloaded
% at
% http://www.ctan.org/tex-archive/graphics/pgf/contrib/pgfplots/doc/latex/
% and
% http://www.ctan.org/tex-archive/graphics/pgf/contrib/pgfplots/doc/latex/plotdata/

\usepackage{pgfplots,listings}
\pgfplotsset{compat=newest}

\lstset{%
	basicstyle=\ttfamily,
	language=[LaTeX]tex, % Seems as if \lstset{language=tex} must be invoked BEFORE loading tikz!?
	tabsize=4,
	breaklines=true,
	breakindent=0pt
}
\pagestyle{empty}

\begin{document}

\begin{tikzpicture}
	\begin{axis}
	\addplot[plot unprocessed to file=gnuplot/generated_plot_to_file1.dat] {x^2};
	\addplot[plot unprocessed to file=gnuplot/generated_plot_to_file2.dat] table {plotdata/pgfplots.testplot};
	\addplot3[samples=4,plot unprocessed to file=gnuplot/generated_plot_to_file3d_1.dat] {x*y};
	\end{axis}
\end{tikzpicture}

\lstinputlisting{gnuplot/generated_plot_to_file1.dat}

\lstinputlisting{gnuplot/generated_plot_to_file2.dat}

\lstinputlisting{gnuplot/generated_plot_to_file3d_1.dat}
\end{document}
